<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="{{ '/assets/css/main.css?v=' | append: site.github.build_revision | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  {% if jekyll.environment == 'production' and site.google_analytics %}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', '{{ site.google_analytics }}');
  </script>
  {% endif %}
  {% seo %}
  <script>
    const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    if (savedTheme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  </script>
</head>

<body>
  <header>
    <div class="container">
      <nav>
        <a href="{{ '/' | relative_url }}" class="logo">Joe Shirey</a>
        <div class="nav-links">
          <a href="{{ '/' | relative_url }}" title="Home"><i class="fa-solid fa-house"></i></a>
          <a href="https://github.com/{{ site.github_username }}" title="GitHub"><i class="fa-brands fa-github"></i></a>
          <a href="https://www.linkedin.com/in/jshirey/" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
          <a href="#" id="theme-toggle" title="Toggle Dark Mode" style="margin-left: 1rem;"><i
              class="fa-solid fa-moon"></i></a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    {{ content }}
  </main>

  <footer>
    <div class="container">
      <div class="footer-social">
        <a href="https://github.com/{{ site.github_username }}" title="GitHub"><i class="fa-brands fa-github"></i></a>
        <a href="https://www.linkedin.com/in/jshirey/" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
        <a href="{{ '/feed.xml' | relative_url }}" title="RSS Feed"><i class="fa-solid fa-rss"></i></a>
      </div>
      <p>&copy; {{ "now" | date: "%Y" }} Joe Shirey</p>
      <p class="disclaimer">The opinions expressed here are my own and do not necessarily represent those of my
        employer.</p>
    </div>
  </footer>

  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const icon = themeToggle.querySelector('i');

    // Set initial icon
    if (document.documentElement.getAttribute('data-theme') === 'dark') {
      icon.classList.remove('fa-moon');
      icon.classList.add('fa-sun');
    }

    themeToggle.addEventListener('click', function (e) {
      e.preventDefault();
      let theme = document.documentElement.getAttribute('data-theme');
      if (theme === 'dark') {
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem('theme', 'light');
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      }
    });
  </script>
</body>

</html>